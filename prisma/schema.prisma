// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client"
  output   = "../src/generated/prisma" // tells where prisma code will be put
}

datasource db {
  provider = "postgresql"
}

// simple schema
// every time changes are made to the schema --> migrate prisma to the database:
// npx prisma migrate dev (optional with a name like: npx prisma migrate dev --name [name])
// npx prisma migrate deploy (when ready for deployment)

model User {
  // @id is a field attribute and is the primary key, a primary key is a unique identifier for each user
  // there can only be one primary key per model 
  // @default(autoincrement()) means it will automatically increment the id when a new user is created
  id Int @id @default(autoincrement())
  name String
  isAdmin Boolean @default(false)
  largeNumber BigInt
  data Json @default("{ \"hello\": \"world\"}")
  role ROLE @default(BASIC)
  age Int? // ? means it's optional
  Game Game[] // this is how relations are created
  Userpage Userpage? // this creates a one-to-one relationshp

  @@unique([name, age]) // this is called a block attribute and 
}

model Userpage {
  userId Int @unique
  user User @relation(fields: [userId], references: [id])
  points Int 
  wins Int @default(0)
  losses Int @default(0)
}

model Game {
  gameId Int @id @default(autoincrement())
  playerId Int
  player User @relation(fields: [playerId], references: [id]) // creates a many-to-many relation to User
}

enum Role {
  BASIC
  ADMIN
}